<!DOCTYPE html>
<html ng-app="afm">
<head>
    <title>v2</title>
    <link href="/static/css/normalize.css" rel="stylesheet"/>
    <link href="/static/css/common.css" rel="stylesheet"/>
    <link href="/static/css/style.css" rel="stylesheet"/>
    <link href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" rel="stylesheet"/>
    <meta name="fragment" content="!" />
</head>
<body class="ng-cloak">
    <!--div class="modal-box ng-cloak" ng-show="template" ng-include="template"></div-->
    <div class="modal-box ng-cloak" ng-view></div>

    <script type="text/ng-template" id="/login.html">
        <modal id="login" title="Войти с паролем">
            <form name="loginForm" ng-submit="auth()">
                <input class="field" name="login" ng-model="user.login" type="email" placeholder="Электронная почта" required="" autofocus="" />
                <input class="field" name="password" ng-model="user.password" type="password" placeholder="Пароль" required />
                <div class="controls">
                    <input type="submit" class="button" value="Войти в профиль" ng-disabled="loginForm.$invalid" />
                    <a href="/amnesia" class="amnesia">восстановить пароль</a>
                </div>
                <hr class="line" />
            </form>
        </modal>
    </script>

    <script type="text/ng-template" id="/signup.html">
        <modal id="signup" title="Регистрация">
            <form name="signupForm" ng-submit="signup()">
                <input class="field" name="email" ng-model="user.email" type="email" placeholder="Электронная почта" required="" autofocus="" />
                <input class="field" name="password" ng-model="user.password" type="password" placeholder="Пароль" required="" />
                <input type="submit" class="button" value="Создать аккаунт" ng-disabled="signupForm.$invalid" />
            </form>
        </modal>
    </script>

    <script type="text/ng-template" id="/amnesia.html">
        <modal id="amnesia" title="Сброс пароля">
            <form name="amnesiaForm" ng-hide="result" ng-submit="amnesia()">
                <input class="field" name="email" ng-model="user.email" required type="email" placeholder="Электронная почта" />
                <input type="submit" class="button" value="Выслать на почту" />
            </form>
            <p ng-show="result">
                Пароль сброшен.
                <a href="{{ result.email_provider }}" ng-show="result.email_provider" target="_blank">Проверьте почту</a>
                <span ng-hide="result.email_provider">Проверьте почту</span>
            </p>
        </modal>
    </script>

    <div class="topline">
        <table class="centroid">
            <tr>
                <td width="20%">
                    <a href="">Любимые треки и эфиры</a>
                </td>
                <td>
                    <a href="">Добавить радио</a>
                </td>
                <td>
                    <p ng-hide="currentUser.isLogged()">
                        <a href="/login">Войти</a>, <a href="/amnesia">восстановить пароль</a> или <a href="/signup">Зарегистрироватся</a>
                    </p>
                    <p ng-hide="!currentUser.isLogged()">
                        <a ng-click="logout()">Выход</a>
                    </p>
                </td>
            </tr>
        </table>
    </div>

    <table class="roof centroid">
        <tr>
            <td>
                <img src="/static/i/logo.png" />
            </td>
            <td>

            </td>
            <td align="right">
                <p>Сейчас на линии всего 10 493 человека. <a href="#">Рассказать в социалочки!</a></p>
            </td>
        </tr>
    </table>

    <div class="radio">
        <player src="/static/swf/player.swf"></player>

        <table class="top">
            <tr>
                <td class="top-left"></td>
                <td class="top-line"></td>
                <td class="top-right"></td>
            </tr>
        </table>
        <div class="ground">
        <div class="ground-shadow">
            <div class="content">
                <table class="radio-box" ng-controller="RadioCtrl">
                    <tr valign="top">
                        <td style="min-width: 310px">
                            <div class="display-ground">
                            <div class="display-inner">
                                <div class="display">
                                <h1 ng-show="currentStation">
                                    {{ currentStation.title }}
                                    <button class="fave-button" ng-hide="isFaved()" ng-click="fave()"></button>
                                </h1>
                                <h2 ng-show="currentTrack"><button>like</button> Artist - Trackname</h2>
                                </div>
                            </div>
                            </div>
                        </td>
                        <td rowspan="3">
                            <div class="radio-table">
                            <div class="table-inner">
                                <input type="search" class="search" placeholder="Поиск по названию радио" ng-model="searchText" />

                                <ul class="filters justified">
                                    <li ng-repeat="filter in filters">
                                        <span class="block" ng-class="itemClass(filter, currentFilter)" ng-click="selectFilter(filter)">{{ filter.title }}</span>
                                    </li>
                                </ul>

                                <div class="table-wrapper">
                                    <hr class="radio-line" />
                                    <div id="radio-cursor" class="radio-cursor" ng-hide="playlist.indexOf(currentStation) == -1"></div>
                                    <ul class="playlist justified">
                                        <li ng-repeat="station in playlist | filter:searchText">
                                            <span class="block station-link" ng-class="itemClass(station, currentStation)" ng-click="selectStation(station)">{{ station.title }}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td align="center">
                            <table class="controls" width="80%">
                            <tr align="center">
                                <td>
                                    <button class="record" disabled="disabled"></button>
                                </td>
                                <td>
                                    <button class="back" ng-disabled="!previousStation" ng-click="selectStation(previousStation)"></button>
                                </td>
                                <td>
                                    <button class="pause" ng-hide="!player.playing" ng-click="player.stop()"></button>
                                    <button class="play" ng-hide="player.playing" ng-click="player.play()"></button>
                                </td>
                                <td>
                                    <button class="random" ng-click="selectRandomStation()"></button>
                                </td>
                                <td>
                                    <button class="volume"></button>
                                    <input class="volume-slider" type="range" min="0" max="1" step="0.1" ng-change="saveVolume()" ng-model="volume" />
                                </td>
                            </tr>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td height="281px"><div class="favorites">
                            <div class="favorites-inner">
                                <ul class="favorites-list justified">
                                    <li ng-repeat="(id, station) in favorites.stations">
                                        <div class="block" ng-click="selectStation(station)">
                                            {{ station.title }} <i class="remove" ng-click="favorites.remove(station.id)"></i>
                                        </div>
                                    </li>
                                </ul>
                                <img src="/static/i/my_favorites.png" class="signage" />
                            </div>
                        </div></td>
                    </tr>
                </table>
            </div>
        </div>
        </div>
        <div class="bottom">
        <table class="inner">
            <tr>
                <td class="bottom-left"></td>
                <td class="bottom-line"></td>
                <td class="bottom-right"></td>
            </tr>
        </table>
        </div>
    </div>

    <div class="footer centroid">
        <div class="container">
        <p>Made in China (更壞)</p>
        </div>
    </div>

    <!--script src="/static/js/script.js"></script-->
    <!--script src="/static/js/jquery-1.9.0.js"></script>
    <script src="/static/js/jquery-ui-1.10.0.custom.js"></script-->
    <script src="/static/js/angular.js"></script>
    <script src="/static/js/angular-resource.js"></script>
    <script src="/static/js/angular-cookies.js"></script>
    <script src="/static/js/swfobject.js"></script>
    <!--script src="/static/js/modernizr.js"></script-->
    <script src="/static/js/app/radio.js"></script>
</body>
</html>